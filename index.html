<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=0">
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
    <title>Fuel Calculator</title>
<script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.5.7/angular.min.js"></script>
<script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.5.7/angular-animate.min.js"></script>
<script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.5.7/angular-touch.min.js"></script>
<script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.5.7/angular-sanitize.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/angular-ui-bootstrap/0.13.4/ui-bootstrap-tpls.min.js"></script>
<link rel="stylesheet" type="text/css" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">

<style type="text/css">
    body {
        background: url("fuel.png");
    }

    .jumbotron {
        background-color: transparent;
    }
    .container-fluid {
        background-color:   rgba(238, 238, 238, .7);

    }

    .vertical-center {
        min-height: 100%;  /* Fallback for browsers do NOT support vh unit */
        min-height: 100vh; /* These two lines are counted as one :-)       */

        display: flex;
        align-items: center;
    }
</style>

<script>
    (function (i, s, o, g, r, a, m) {
        i['GoogleAnalyticsObject'] = r;
        i[r] = i[r] || function () {
                    (i[r].q = i[r].q || []).push(arguments)
                }, i[r].l = 1 * new Date();
        a = s.createElement(o),
                m = s.getElementsByTagName(o)[0];
        a.async = 1;
        a.src = g;
        m.parentNode.insertBefore(a, m)
    })(window, document, 'script', 'https://www.google-analytics.com/analytics.js', 'ga');

    ga('create', 'UA-24021117-1', 'auto');
    ga('send', 'pageview');

    angular.module("CalcApp", ['ui.bootstrap'])
            .controller("CalcCtrl", function ($scope) {
                $scope.consumption = 0.605;
                $scope.sessiontimeminutes = 25;
                $scope.sessiontime;
                $scope.lapminutes;
                $scope.lapseconds;
                $scope.totaltanksize = 90;
                $scope.tankpercentstart = 60;
                $scope.consumptionperminute;

                $scope.sessiontime = function () {
                    return ($scope.sessiontimeminutes * 60);
                };

                $scope.singlelaptime = function () {
                    return (((+$scope.lapminutes || 0) * 60)) + (+$scope.lapseconds || 0);
                };

                $scope.lapsinsession = function () {
                    var laps = $scope.sessiontime() / $scope.singlelaptime();
                    var lapCount = Math.ceil(laps);
                    var remainder = lapCount - laps;
                    console.log("remainder", remainder);
                    if (remainder < 0.3) {
                        lapCount = lapCount + 1;
                    }
                    $scope.lapwarning
                    return lapCount;
                };

                $scope.fuelneededinsession = function () {
                    return $scope.lapsinsession() * $scope.consumption;
                };

                $scope.consumptionperminute = function () {
                    var consumptionpersecond = $scope.consumption / $scope.singlelaptime();
                    return consumptionpersecond * 60;
                };

                $scope.maxstintlength = function () {
                    return $scope.consumption * $scope.startingfuel();
                };

                $scope.startingfuel = function () {
                    return $scope.totaltanksize * ($scope.tankpercentstart / 100);
                };

                $scope.alertMe = function () {
                    setTimeout(function () {
                        $window.alert('You\'ve selected the alert tab!');
                    });
                };

                $scope.model = {
                    name: 'Tabs'
                };
            });

</script>

<body ng-app="CalcApp">

<div class="jumbotron vertical-center">

    <div class="container-fluid" ng-controller="CalcCtrl">

        <h2>Fuel Calculator</h2>
        <small>
            Quickly determine how much fuel you need
        </small>
        <div class="panel panel-default">
            <div class="panel-body">
                <form class="form-horizontal">
                    <div class="form-group">
                        <label class="col-sm-2 control-label">Session Time</label>
                        <div class="col-sm-10">
                            <input class="form-control" type="number" ng-model="sessiontimeminutes" placeholder="Email">
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="col-sm-2 control-label">Lap Time</label>
                        <div class="col-sm-5">
                            <input class="form-control" type="number" ng-model="lapminutes" placeholder="Minutes">
                        </div>
                        <div class="col-sm-5">
                            <input class="form-control" type="number" ng-model="lapseconds" placeholder="Seconds">
                        </div>
                    </div>
                    <div class="form-group">
                        <div class="col-sm-10">
                            <small>Lap duration in seconds {{singlelaptime()}}</small>
                        </div>
                    </div>

                    <div class="form-group">
                        <label class="col-sm-2 control-label">Fuel consumption per lap</label>
                        <div class="col-sm-10">
                            <input class="form-control" id="consumption" ng-model="consumption"
                                   placeholder="ltr/kg/gal">
                        </div>
                    </div>
                </form>
            </div>
            <div class="panel-footer">
                <p class="lead">You need {{fuelneededinsession() | number : 3}} units of fuel</p>
                <p>
                    <small>Your race should be {{lapsinsession() | number}} laps</small>
                </p>

            </div>
        </div>
        I'd love your feedback.
        <br>
        Email me @ <a mailto="twobigpaws@gmail.com">twobigpaws@gmail.com</a>.

        <div>
            Contribute to this project on <a ng-href="https://github.com/TwoBigPaws/FuelCalculator{{hash}}">GitHub<a/>
        </div>
    </div>
    <div>
</body>
</html>
