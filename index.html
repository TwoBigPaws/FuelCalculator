
		<title>Fuel Calculator</title>
		<script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.5.7/angular.min.js"></script>
		<script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.5.7/angular-animate.min.js"></script>
		<script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.5.7/angular-touch.min.js"></script>
		<script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.5.7/angular-sanitize.js"></script>
		<script src="https://cdnjs.cloudflare.com/ajax/libs/angular-ui-bootstrap/0.13.4/ui-bootstrap-tpls.min.js"></script>
		<link rel="stylesheet" type="text/css" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">

		<style type="text/css">
		  form.tab-form-demo .tab-pane {
		    margin: 20px 20px;
		  }
		</style>

	<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-24021117-1', 'auto');
  ga('send', 'pageview');

angular.module("CalcApp", ['ui.bootstrap'])
	.controller("CalcCtrl", function( $scope ) {
		$scope.consumption = 0.605;
    $scope.sessiontimeminutes = 25;
    $scope.sessiontime;
    $scope.lapminutes;
    $scope.lapseconds;
    $scope.totaltanksize = 90;
    $scope.tankpercentstart = 60;
		$scope.consumptionperminute;

		$scope.sessiontime = function() {
    	return ($scope.sessiontimeminutes * 60);
    }

    $scope.singlelaptime = function() {
    	return (((+$scope.lapminutes || 0) * 60))+(+$scope.lapseconds || 0);
    }

    $scope.lapsinsession = function() {
			var laps = $scope.sessiontime() / $scope.singlelaptime();
			var lapCount = Math.ceil( laps );
			var remainder = lapCount - laps;
			console.log( "remainder", remainder );
			if( remainder < 0.3 ) {
				lapCount = lapCount + 1;
			}
			$scope.lapwarning
			return lapCount;
    }

		    $scope.fuelneededinsession = function() {
		    	return $scope.lapsinsession() * $scope.consumption;
		    }

				$scope.consumptionperminute = function() {
					var consumptionpersecond = $scope.consumption / $scope.singlelaptime();
				  return consumptionpersecond * 60;
				    }

	$scope.maxstintlength = function() {
    	return $scope.consumption * $scope.startingfuel();
    }

   $scope.startingfuel = function() {
    	return $scope.totaltanksize * ($scope.tankpercentstart/100);
    }

  $scope.alertMe = function() {
    setTimeout(function() {
      $window.alert('You\'ve selected the alert tab!');
    });
  };

  $scope.model = {
    name: 'Tabs'
  };
});

		</script>

		<body ng-app="CalcApp">
			<div ng-controller="CalcCtrl" class="container-fluid">


<div>
	<img ng-src="https://www.dropbox.com/s/vpkqe5k39lg02z2/Aconex%20Racing%20logo%201-1%20web.png?dl=1" height="100px" width="500px" />
	<div>

<h2>
		<div>
		Welcome to a simple iRacing Fuel Calculator.
	  </div>
</h2>

<h4>
Need to quickly find out how much fuel you need for that timed race?
</h4>

<p>
		This basic app is designed for you to easily calculate how much fuel you need for time limited races.
</p>


<form class="form-group-lg">
				      <div class="col-xs-2">
			    <label>Session Time (minutes)</label>
			    <input type="number" class="form-control" ng-model="sessiontimeminutes" autofocus />
			    <label>Lap time</label>
			    <input type="number" class="form-control" ng-model="lapminutes" placeholder="Minutes"/ >
			    <label></label>
			    <input type="number" class="form-control" ng-model="lapseconds" placeholder="seconds..."/>
				<label>Fuel consumption per lap</label>
				<input type="number" class="form-control" ng-model="consumption">
					  <input type="reset" class="btn btn-sm btn-primary">
		</div>
</form>
<br>

		<h3>
		You need <b> {{fuelneededinsession() | number : 3}} </b> units of fuel
	</h3>

		<div>
		Lap duration in seconds {{singlelaptime()}}
		</div>

		<div>
		Your race should be {{lapsinsession()}} laps
		</div>





<div>
Consumption per minute {{consumptionperminute() | number : 3}}
Warning, this multiplied by session length will most likely not be enough fuel as sessions run time + 1 lap.
</div>

<div>
Max stint length {{maxstintlength()}}
</div>

      <div class="input">
			    <label>Tank percent start</label>
			    <input type="number" class="form-control" ng-model="tankpercentstart">
			</div>

       <div class="form-group">
			    <label>Full tank size</label>
			    <input type="number" class="form-control" ng-model="totaltanksize">
			</div>

      <div>
			Fuel at start {{startingfuel()}}
			</div>

      <div>
			Laps before pit {{startingfuel()}}
			</div>

      <div>
			I'd love your feedback, email me @	<a ng-href="twobigpaws@gmail.com{{hash}}">twobigpaws@gmail.com</a>.
			<br>
			<div>
				Contribute to this project on Github! <a ng-href="https://github.com/TwoBigPaws/FuelCalculator">GitHub<a/>
			</div>
	      		

			
		</div>
	</body>
	</html>
